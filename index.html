<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>

    let playerSelection;
    let computerSelection;

  function computerPlay() {
     computerSelection = Math.floor(Math.random() * Math.floor(3))
      if (computerSelection === 0) {
      return "rock";
      } else if (computerSelection === 1) {
      return "scissors";
      } else if (computerSelection === 2) {
      return "paper";
      }else {
        return "There was an error, please try again";
      }
    }

    // 0 - draw
    // 1 - player wins
    // 2 - cpu wins

    let playerScore = 0;
    let computerScore = 0;
    let round = 0;

    function playRound(playerSelection, computerSelection) {
       playerSelection = playerSelection.toLowerCase();
       computerSelection = computerSelection.toLowerCase();
    
      if (playerSelection == 'rock' && computerSelection == 'rock'){
          result = 0;
          return `Draw! You both chose ${playerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'paper' && computerSelection == 'paper'){
          result = 0;
          return `Draw! You both chose ${playerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'scissors' && computerSelection == 'scissors'){
          result = 0;
          return `Draw! You both chose ${playerSelection}. ${playerScore} - ${computerScore}`;

      } else if (playerSelection == 'rock' && computerSelection == 'scissors'){
          result = 1;
          playerScore++;
          return `Victory! Your ${playerSelection} beats the ${computerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'scissors' && computerSelection == 'paper'){
          result = 1;
          playerScore++;
          return `Victory! Your ${playerSelection} beats the ${computerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'paper' && computerSelection == 'rock'){
          result = 1;
          playerScore++;
          return `Victory! Your ${playerSelection} beats the ${computerSelection}. ${playerScore} - ${computerScore}`;

      } else if (playerSelection == 'rock' && computerSelection == 'paper'){
          result = 2;
          computerScore++;
          return `Defeat! Your ${playerSelection} can't beat ${computerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'paper' && computerSelection == 'scissors'){
          result = 2;
          computerScore++;
          return `Defeat! Your ${playerSelection} can't beat ${computerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection == 'scissors' && computerSelection == 'rock'){
          result = 2;
          computerScore++;
          return `Defeat! Your ${playerSelection} can't beat ${computerSelection}. ${playerScore} - ${computerScore}`;
      } else if (playerSelection !== 'rock' || playerSelection !== 'paper' ||playerSelection !== 'scissors'){
        return `"${playerSelection}" is not a valid entry. Please choose rock, paper, scissors.`
      }

      console.log(computerPlay())

}


function game(){

for (let round = 0; round < 5; round++){
   playerSelection = prompt("Choose your fighter: rock, paper or scissors?");
   computerSelection = computerPlay();
   
    
 if (playerScore > computerScore && round >= 4) { // en R5 devuelve un resultado random omitiendo if statments en computerPlay()
                    console.log(`You won the last round. The final score is: ${playerScore+=1} - ${computerScore}. If you want to play again, refresh the page.`) 
                    alert(`CONGRATULATIONS! YOU WON THE GAME! Final score: ${playerScore} - ${computerScore}`);
                    break;
                    
                } else if(computerScore > playerScore && round >= 4) {  
                    console.log(`You lost the last round. The final score is: ${playerScore} - ${computerScore+=1}. If you want to play again, refresh the page.`) 
                    alert(`Sorry pal, the computer beat you. Better luck next time. Final score: ${playerScore} - ${computerScore}`);
                    break;

                } else if (playerScore == computerScore && round >= 4){
                  console.log(`You drew the last round. The final score is: ${playerScore} - ${computerScore}. If you want to play again, refresh the page.`)
                  alert(`It's a tie. Final score: ${playerScore} - ${computerScore} `)
                }

  console.log(playRound(playerSelection, computerSelection))

}
}


game()
    
  </script>
</body>
</html>
